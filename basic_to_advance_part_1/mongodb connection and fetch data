// step 1 ..//    basic_to_advance\.env    // create .env file in this way and .env file  just have user name and password according to given below

myusername=kamal12
mypassword=knnnsjk

//step 2  //create file ..   // basic_to_advance\src\lib\databse\db_connection.js  // for connection.. db_connection.js file write code given below



const username = process.env.myusername
const password = process.env.mypassword


if(!username || !password){
    throw new error("Missing MongoDB Credentials")
}


export const connectionString = `mongodb+srv://${username}:${password}@cluster0.adea2.mongodb.net/employee?retryWrites=true&w=majority&appName=Cluster0`;


//step 3 // create file .. //    basic_to_advance\src\app\api\db-emp\route.js // in this route.js file give code in this way 


const username = process.env.myusername
const password = process.env.mypassword


if(!username || !password){
    throw new error("Missing MongoDB Credentials")
}


export const connectionString = `mongodb+srv://${username}:${password}@cluster0.adea2.mongodb.net/employee?retryWrites=true&w=majority&appName=Cluster0`; 
// here look at the employee ... employee is basically name of database.. if your database name is product then you should replace product insted of employee




//step 4  for fetching data  // create file //  basic_to_advance\src\lib\databse\model\employees.js  // now write code in employee.js file in this way

import { connectionString } from '../../../lib/databse/db_connection'
import mongoose from "mongoose"
import { NextResponse } from "next/server"

import Employee from '../../../lib/databse/model/employees'




export const GET = async()=>{
    await mongoose.connect(connectionString)

    const empData = await Employee.find();
    // return NextResponse.json({result: "success"})
    return NextResponse.json({result: empData})
}





